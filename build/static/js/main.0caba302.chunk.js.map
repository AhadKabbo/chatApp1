{"version":3,"sources":["service/firebase.js","context/ChatContext.jsx","hooks/useResolved.js","components/App/App.jsx","hooks/useAuth.js","components/Chat/Chat.jsx","components/FormField/FormField.jsx","components/Login/formikConfig.js","components/Login/Login.jsx","components/Signup/formikConfig.js","components/Signup/Signup.jsx","helpers/notMe.js","helpers/joinUsernames.js","helpers/groupMessages.js","components/ChatList/ChatList.jsx","components/LeftRail/LeftRail.jsx","components/ChatInput/ChatInput.jsx","components/RailHeader/RailHeader.jsx","components/ChatAvatar/ChatAvatar.jsx","components/ChatToolbar/ChatToolbar.jsx","components/SearchUsers/SearchUsers.jsx","hooks/useDebounce.js","components/MessageList/MessageList.jsx","hooks/useScrollToBottom.js","components/ImageUpload/ImageUpload.jsx","index.js"],"names":["firebase","initializeApp","apiKey","process","REACT_APP_API_KEY","authDomain","REACT_APP_AUTH_DOMAIN","databaseURL","REACT_APP_DATABASE_URL","projectId","REACT_APP_PROJECT_ID","storageBucket","REACT_APP_STORAGE_BUCKET","messagingSenderId","REACT_APP_MESSAGING_SENDER_ID","appId","REACT_APP_APP_ID","error","test","message","console","stack","fb","auth","storage","firestore","ChatContext","createContext","ChatProvider","children","authUser","useState","myChats","setMyChats","chatConfig","setChatConfig","selectedChat","setSelectedChat","useEffect","collection","doc","uid","onSnapshot","snap","userSecret","avatar","data","userName","projectID","Provider","value","selectChatClick","chat","getMessages","id","messages","deleteChatClick","admin","window","confirm","deleteChat","leaveChat","createChatClick","newChat","title","useChat","useContext","useResolved","vals","resolved","setResolved","every","v","undefined","App","history","useHistory","setAuthUser","onAuthStateChanged","user","useAuth","authResolved","push","className","path","exact","component","Chat","Login","Signup","log","hideUI","onConnect","getChats","onNewChat","username","sort","a","b","onDeleteChat","filter","c","onNewMessage","chatId","chatThatMessageBelongsTo","find","filteredChats","updatedChat","last_message","src","alt","FormField","name","label","type","defaultValues","email","password","validationSchema","Yup","shape","required","serverError","setServerError","onSubmit","setSubmitting","signInWithEmailAndPassword","then","res","catch","err","code","finally","validateOnMount","initialValues","isValid","isSubmitting","onClick","disabled","verifyPassword","min","oneOf","matches","createUserWithEmailAndPassword","fetch","method","body","JSON","stringify","userId","headers","set","notMe","people","p","person","joinUsernames","currentUsername","map","un","join","groupMessages","finalArr","currentArr","currentAuthor","forEach","m","sender","splice","length","ChatList","index","Icon","circular","inverted","color","attachments","text","slice","LeftRail","chatsResolved","Loader","active","size","ChatInput","chatInputText","setChatInputText","imageModalOpen","setImageModalOpen","inputRef","useRef","image","setImage","sendChatMessage","sendMessage","files","input","current","click","placeholder","onKeyPress","e","key","onChange","target","ref","accept","file","onFileAttach","mode","close","RailHeader","configResolved","crop","header","croppedImage","uploadRef","child","put","getDownloadURL","url","update","signOut","IconGroup","Image","toUpperCase","corner","ChatAvatar","setAvatar","where","get","docs","ChatToolbar","searching","setSearching","closeFn","visible","SearchUsers","searchRef","loading","setLoading","searchTerm","setSearchTerm","debouncedSearchTerm","delay","debouncedValue","setDebouncedValue","handler","setTimeout","clearTimeout","useDebounce","searchResults","setSearchResults","focus","getOtherPeople","userNames","Object","keys","u","toLowerCase","includes","style","display","Search","fluid","onBlur","open","r","onSearchChange","results","onResultSelect","result","addPerson","MessageList","trigger","Promise","all","Array","from","document","images","img","complete","resolve","onload","onerror","getElementsByClassName","scrollTop","scrollHeight","individualMessage","ImageUpload","imageSrc","setImageSrc","cropRef","fr","FileReader","readAsDataURL","Modal","dimmer","Header","Content","width","height","border","Actions","canvas","getImageScaledToCanvas","toDataURL","blob","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.0caba302.chunk.js","sourcesContent":["import firebase from 'firebase/app'; // <-- This must be first\r\nimport 'firebase/auth';\r\nimport 'firebase/storage';\r\nimport 'firebase/firestore';\r\n\r\ntry {\r\n  firebase.initializeApp({\r\n    apiKey: process.env.REACT_APP_API_KEY,\r\n    authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n    databaseURL: process.env.REACT_APP_DATABASE_URL,\r\n    projectId: process.env.REACT_APP_PROJECT_ID,\r\n    storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n    messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\r\n    appId: process.env.REACT_APP_APP_ID\r\n  });\r\n} catch (error) {\r\n  if (!/already exists/u.test(error.message)) {\r\n    console.error('Firebase admin initialization error', error.stack);\r\n  }\r\n}\r\n\r\n// Passing off firebase.auth() instead of firebase.auth\r\n// allows us to share the same instance of Firebase throughout\r\n// the entire app whenever we import it from here.\r\n\r\nexport const fb = {\r\n  auth: firebase.auth(),\r\n  storage: firebase.storage(),\r\n  firestore: firebase.firestore(),\r\n};\r\n","import { fb } from 'service';\r\nimport { createContext, useContext, useEffect, useState } from 'react';\r\nimport { newChat, leaveChat, deleteChat, getMessages } from 'react-chat-engine';\r\n\r\nexport const ChatContext = createContext();\r\n\r\nexport const ChatProvider = ({ children, authUser }) => {\r\n  const [myChats, setMyChats] = useState();\r\n  const [chatConfig, setChatConfig] = useState();\r\n  const [selectedChat, setSelectedChat] = useState();\r\n\r\n  const createChatClick = () => {\r\n    newChat(chatConfig, { title: '' });\r\n  };\r\n  const deleteChatClick = chat => {\r\n    const isAdmin = chat.admin === chatConfig.userName;\r\n\r\n    if (\r\n      isAdmin &&\r\n      window.confirm('Are you sure you want to delete this chat?')\r\n    ) {\r\n      deleteChat(chatConfig, chat.id);\r\n    } else if (window.confirm('Are you sure you want to leave this chat?')) {\r\n      leaveChat(chatConfig, chat.id, chatConfig.userName);\r\n    }\r\n  };\r\n  const selectChatClick = chat => {\r\n    getMessages(chatConfig, chat.id, messages => {\r\n      setSelectedChat({\r\n        ...chat,\r\n        messages,\r\n      });\r\n    });\r\n  };\r\n\r\n  // Set the chat config once the\r\n  // authUser has initialized.\r\n  useEffect(() => {\r\n    if (authUser) {\r\n      fb.firestore\r\n        .collection('chatUsers')\r\n        .doc(authUser.uid)\r\n        .onSnapshot(snap => {\r\n          setChatConfig({\r\n            userSecret: authUser.uid,\r\n            avatar: snap.data().avatar,\r\n            userName: snap.data().userName,\r\n            projectID: 'd90b1bb7-b5eb-48bc-bc3a-36119d2fc895',\r\n          });\r\n        });\r\n    }\r\n  }, [authUser, setChatConfig]);\r\n\r\n  return (\r\n    <ChatContext.Provider\r\n      value={{\r\n        myChats,\r\n        setMyChats,\r\n        chatConfig,\r\n        selectedChat,\r\n        setChatConfig,\r\n        setSelectedChat,\r\n        selectChatClick,\r\n        deleteChatClick,\r\n        createChatClick,\r\n      }}\r\n    >\r\n      {children}\r\n    </ChatContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useChat = () => {\r\n  const {\r\n    myChats,\r\n    setMyChats,\r\n    chatConfig,\r\n    selectedChat,\r\n    setChatConfig,\r\n    setSelectedChat,\r\n    selectChatClick,\r\n    deleteChatClick,\r\n    createChatClick,\r\n  } = useContext(ChatContext);\r\n\r\n  return {\r\n    myChats,\r\n    setMyChats,\r\n    chatConfig,\r\n    selectedChat,\r\n    setChatConfig,\r\n    setSelectedChat,\r\n    selectChatClick,\r\n    deleteChatClick,\r\n    createChatClick,\r\n  };\r\n};\r\n","import { useState, useEffect } from 'react';\r\n\r\n// The purpose of this hook is to be able to determine whether\r\n// or not a value that is initialized as undefined has been\r\n// updated to the expected data type. For example, if a\r\n// component has a state variable that is declared without an\r\n// initial value, but you expect that value to appear at some point..\r\n// you can use this hook to determine when the value is no longer undefined.\r\n// This is especially helpful with auth.\r\n\r\nexport const useResolved = (\r\n  ...vals\r\n) => {\r\n  const [resolved, setResolved] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setResolved(vals.every(v => v !== undefined));\r\n  }, [vals]);\r\n\r\n  // Returns true if resolved otherwise false\r\n  return resolved;\r\n};\r\n","import { useEffect } from 'react';\r\nimport { ChatProvider } from 'context';\r\nimport 'semantic-ui-css/semantic.min.css';\r\nimport { useAuth, useResolved } from 'hooks';\r\nimport { Login, Signup, Chat } from 'components';\r\nimport { Switch, Route, useHistory } from 'react-router-dom';\r\n\r\nexport const App = () => {\r\n  const history = useHistory();\r\n  const { authUser } = useAuth();\r\n  const authResolved = useResolved(authUser);\r\n\r\n  // If the user is logged in it will prevent the\r\n  // user from seeing the login/signup screens\r\n  // by always redirecting to chat on auth change.\r\n  useEffect(() => {\r\n    if (authResolved) {\r\n      history.push(!!authUser ? '/' : '/login');\r\n    }\r\n  }, [authResolved, authUser, history]);\r\n\r\n  return authResolved ? (\r\n    <ChatProvider authUser={authUser}>\r\n      <div className=\"app\">\r\n        <Switch>\r\n          <Route path=\"/\" exact component={Chat} />\r\n          <Route path=\"/login\" component={Login} />\r\n          <Route path=\"/signup\" component={Signup} />\r\n        </Switch>\r\n      </div>\r\n    </ChatProvider>\r\n  ) : (\r\n    <>Loading...</>\r\n  );\r\n};\r\n","import { fb } from 'service';\r\nimport { useEffect, useState } from 'react';\r\n\r\n// Initialized as undefined and set to null if not logged in\r\n// This gives us a way to determine whether or not the hook\r\n// has yet to resolve. \r\n\r\n// This is important because we want to be able to distinguish\r\n// between not having yet determined auth state vs determining\r\n// that there is no user currently logged in.\r\n\r\n// So that gives us 3 states\r\n// 1. Unresolved\r\n// 2. No user\r\n// 3. User exists\r\n\r\nexport const useAuth = () => {\r\n  const [authUser, setAuthUser] = useState(); // undefined | firebase.User | null\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = fb.auth.onAuthStateChanged(user => {\r\n      if (user) {\r\n        setAuthUser(user);\r\n      } else {\r\n        setAuthUser(null);\r\n      }\r\n    });\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  return {\r\n    authUser,\r\n  };\r\n};\r\n","import { useEffect } from 'react';\r\nimport { useChat } from 'context';\r\nimport { getChats, ChatEngine } from 'react-chat-engine';\r\nimport { LeftRail, ChatToolbar, ChatInput, MessageList } from 'components';\r\n\r\nexport const Chat = () => {\r\n  const {\r\n    myChats,\r\n    setMyChats,\r\n    chatConfig,\r\n    selectedChat,\r\n    selectChatClick,\r\n    setSelectedChat,\r\n  } = useChat();\r\n\r\n  useEffect(() => {\r\n    console.log('My Chats: ', myChats);\r\n  }, [myChats]);\r\n\r\n  useEffect(() => {\r\n    console.log('Selected Chat: ', selectedChat);\r\n  }, [selectedChat]);\r\n\r\n  return (\r\n    <>\r\n      {!!chatConfig && (\r\n        <ChatEngine\r\n          hideUI={true}\r\n          userName={chatConfig.userName}\r\n          projectID={chatConfig.projectID}\r\n          userSecret={chatConfig.userSecret}\r\n          onConnect={() => {\r\n            getChats(chatConfig, setMyChats);\r\n          }}\r\n          onNewChat={chat => {\r\n            if (chat.admin.username === chatConfig.userName) {\r\n              selectChatClick(chat);\r\n            }\r\n            setMyChats([...myChats, chat].sort((a, b) => a.id - b.id));\r\n          }}\r\n          onDeleteChat={chat => {\r\n            if (selectedChat?.id === chat.id) {\r\n              setSelectedChat(null);\r\n            }\r\n            setMyChats(\r\n              myChats.filter(c => c.id !== chat.id).sort((a, b) => a.id - b.id),\r\n            );\r\n          }}\r\n          onNewMessage={(chatId, message) => {\r\n            if (selectedChat && chatId === selectedChat.id) {\r\n              setSelectedChat({\r\n                ...selectedChat,\r\n                messages: [...selectedChat.messages, message],\r\n              });\r\n            }\r\n            const chatThatMessageBelongsTo = myChats.find(c => c.id === chatId);\r\n            const filteredChats = myChats.filter(c => c.id !== chatId);\r\n            const updatedChat = {\r\n              ...chatThatMessageBelongsTo,\r\n              last_message: message,\r\n            };\r\n            setMyChats(\r\n              [updatedChat, ...filteredChats].sort((a, b) => a.id - b.id),\r\n            );\r\n          }}\r\n        />\r\n      )}\r\n\r\n      <div className=\"chat-container\">\r\n        <LeftRail />\r\n        <div className=\"current-chat\">\r\n          {selectedChat ? (\r\n            <div className=\"chat\">\r\n              <ChatToolbar />\r\n              <MessageList />\r\n              <ChatInput />\r\n            </div>\r\n          ) : (\r\n            <div className=\"no-chat-selected\">\r\n              <img\r\n                src=\"/img/pointLeft.png\"\r\n                className=\"point-left\"\r\n                alt=\"point-left\"\r\n              />\r\n              Select A Chat\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import { ErrorMessage, Field } from 'formik';\r\n\r\nexport const FormField = ({ name, label, type = 'text' }) => (\r\n  <label>\r\n    {label}\r\n    <Field name={name} type={type} />\r\n    <ErrorMessage className=\"error\" component=\"div\" name={name} />\r\n  </label>\r\n);\r\n","import * as Yup from 'yup';\r\n\r\nexport const defaultValues = {\r\n  email: '',\r\n  password: '',\r\n};\r\n\r\nexport const validationSchema = Yup.object().shape({\r\n  email: Yup.string().required('Required'),\r\n  password: Yup.string().required('Required'),\r\n});\r\n","import { fb } from 'service';\r\nimport { useState } from 'react';\r\nimport { Form, Formik } from 'formik';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { FormField } from 'components/FormField/FormField';\r\nimport { validationSchema, defaultValues } from './formikConfig';\r\n\r\nexport const Login = () => {\r\n  const history = useHistory();\r\n  const [serverError, setServerError] = useState('');\r\n\r\n  const login = ({ email, password }, { setSubmitting }) => {\r\n    fb.auth\r\n      .signInWithEmailAndPassword(email, password)\r\n      .then(res => {\r\n        if (!res.user) {\r\n          setServerError(\r\n            \"We're having trouble logging you in. Please try again.\",\r\n          );\r\n        }\r\n      })\r\n      .catch(err => {\r\n        if (err.code === 'auth/wrong-password') {\r\n          setServerError('Invalid credentials');\r\n        } else if (err.code === 'auth/user-not-found') {\r\n          setServerError('No account for this email');\r\n        } else {\r\n          setServerError('Something went wrong :(');\r\n        }\r\n      })\r\n      .finally(() => setSubmitting(false));\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth-form\">\r\n      <h1>Login</h1>\r\n      <Formik\r\n        onSubmit={login}\r\n        validateOnMount={true}\r\n        initialValues={defaultValues}\r\n        validationSchema={validationSchema}\r\n      >\r\n        {({ isValid, isSubmitting }) => (\r\n          <Form>\r\n            <FormField name=\"email\" label=\"Email\" type=\"email\" />\r\n            <FormField name=\"password\" label=\"Password\" type=\"password\" />\r\n\r\n            <div className=\"auth-link-container\">\r\n              Don't have an account?{' '}\r\n              <span\r\n                className=\"auth-link\"\r\n                onClick={() => history.push('signup')}\r\n              >\r\n                Sign Up!\r\n              </span>\r\n            </div>\r\n\r\n            <button type=\"submit\" disabled={!isValid || isSubmitting}>\r\n              Login\r\n            </button>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n\r\n      {!!serverError && <div className=\"error\">{serverError}</div>}\r\n    </div>\r\n  );\r\n};\r\n","import * as Yup from 'yup';\r\n\r\nexport const defaultValues = {\r\n  email: '',\r\n  password: '',\r\n  userName: '',\r\n  verifyPassword: '',\r\n};\r\n\r\nexport const validationSchema = Yup.object().shape({\r\n  email: Yup.string().email('Invalid email address').required('Required'),\r\n  password: Yup.string().required('Required').min(8, 'Must be at least 8 characters'),\r\n  verifyPassword: Yup.string().required('Required').oneOf([Yup.ref('password'), null], 'Passwords must match'),\r\n  userName: Yup.string().required('Required').matches(/^\\S*$/, 'No spaces').min(3, 'Must be at least 3 characters'),\r\n});\r\n","import { fb } from 'service';\r\nimport { Form, Formik } from 'formik';\r\nimport React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { FormField } from 'components/FormField/FormField';\r\nimport { defaultValues, validationSchema } from './formikConfig';\r\n\r\nexport const Signup = () => {\r\n  const history = useHistory();\r\n  const [serverError, setServerError] = useState('');\r\n\r\n  const signup = ({ email, userName, password }, { setSubmitting }) => {\r\n    fb.auth\r\n      .createUserWithEmailAndPassword(email, password)\r\n      .then(res => {\r\n        if (res?.user?.uid) {\r\n          fetch('/api/createUser', {\r\n            method: 'POST',\r\n            body: JSON.stringify({\r\n              userName,\r\n              userId: res.user.uid,\r\n            }),\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n            },\r\n          }).then(() => {\r\n            fb.firestore\r\n              .collection('chatUsers')\r\n              .doc(res.user.uid)\r\n              .set({ userName, avatar: '' });\r\n          });\r\n        } else {\r\n          setServerError(\r\n            \"We're having trouble signing you up. Please try again.\",\r\n          );\r\n        }\r\n      })\r\n      .catch(err => {\r\n        if (err.code === 'auth/email-already-in-use') {\r\n          setServerError('An account with this email already exists');\r\n        } else {\r\n          setServerError(\r\n            \"We're having trouble signing you up. Please try again.\",\r\n          );\r\n        }\r\n      })\r\n      .finally(() => setSubmitting(false));\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth-form\">\r\n      <h1>Signup</h1>\r\n      <Formik\r\n        onSubmit={signup}\r\n        validateOnMount={true}\r\n        initialValues={defaultValues}\r\n        validationSchema={validationSchema}\r\n      >\r\n        {({ isValid, isSubmitting }) => (\r\n          <Form>\r\n            <FormField name=\"userName\" label=\"User Name\" />\r\n            <FormField name=\"email\" label=\"Email\" type=\"email\" />\r\n            <FormField name=\"password\" label=\"Password\" type=\"password\" />\r\n            <FormField\r\n              type=\"password\"\r\n              name=\"verifyPassword\"\r\n              label=\"Verify Password\"\r\n            />\r\n\r\n            <div className=\"auth-link-container\">\r\n              Already have an account?{' '}\r\n              <span className=\"auth-link\" onClick={() => history.push('login')}>\r\n                Log In!\r\n              </span>\r\n            </div>\r\n\r\n            <button disabled={isSubmitting || !isValid} type=\"submit\">\r\n              Sign Up\r\n            </button>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n\r\n      {!!serverError && <div className=\"error\">{serverError}</div>}\r\n    </div>\r\n  );\r\n};\r\n","// Returns the first user inside of the selected chat\r\n// that is not the currently logged in user.\r\n\r\nexport const notMe = (chatConfig, selectedChat) => {\r\n  return selectedChat.people.find(p => p.person.username !== chatConfig.userName)?.person?.username;\r\n};\r\n","// Takes an array of people and then joins their\r\n// usernames with commas. Also filters out current\r\n// user's username. If there is only one username\r\n// it just returns it.\r\n\r\nexport const joinUsernames = (people, currentUsername) => {\r\n  return '@' + people\r\n    .map(p => p.person.username)\r\n    .filter(un => un !== currentUsername)\r\n    .join(', @');\r\n};\r\n","/* \r\n  Turns a 1D array into a 2D array by grouping\r\n  all messages from the same sender if they are\r\n  in sequence. So:\r\n  [\r\n    { sender: 'USER-A', text: 'blah blah'},\r\n    { sender: 'USER-A', text: 'hello world'},\r\n    { sender: 'USER-B', text: 'Test 123'},\r\n    { sender: 'USER-A', text: 'Peace out'},\r\n  ]\r\n  Becomes:\r\n  [\r\n    [\r\n      { sender: 'USER-A', text: 'blah blah'},\r\n      { sender: 'USER-A', text: 'hello world'},\r\n    ],\r\n    [\r\n      { sender: 'USER-B', text: 'Test 123'},\r\n    ],\r\n    [\r\n      { sender: 'USER-A', text: 'Peace out'},\r\n    ]\r\n  ]\r\n*/\r\n\r\nexport const groupMessages = messages => {\r\n  const finalArr = [];\r\n\r\n  let currentArr = [];\r\n  let currentAuthor = '';\r\n  messages.forEach(m => {\r\n    // If we are on a new author\r\n    // This also works on the initial iteration because the value is initially empty string\r\n    if (m.sender.username !== currentAuthor) {\r\n      if (currentAuthor) {\r\n        finalArr.push([...currentArr]);\r\n      }\r\n      currentArr.splice(0, currentArr.length); // empty the array\r\n      currentArr.push(m);\r\n      currentAuthor = m.sender.username;\r\n    } else {\r\n      currentArr.push(m);\r\n    }\r\n  });\r\n\r\n  // We have to call this at the very end as well because\r\n  // once the loop finishes, the first if(){} block will\r\n  // not run and thus the finalArr.push line will not run\r\n  finalArr.push([...currentArr]);\r\n\r\n  return finalArr;\r\n};\r\n","import React from 'react';\r\nimport { useChat } from 'context';\r\nimport { ChatAvatar } from 'components';\r\nimport { Icon } from 'semantic-ui-react';\r\nimport { joinUsernames, notMe } from 'helpers';\r\n\r\nexport const ChatList = () => {\r\n  const {\r\n    myChats,\r\n    chatConfig,\r\n    selectedChat,\r\n    selectChatClick,\r\n    deleteChatClick,\r\n  } = useChat();\r\n\r\n  return (\r\n    <div className=\"chat-list\">\r\n      {myChats.map((c, index) => (\r\n        <div\r\n          className={`chat-list-item ${\r\n            selectedChat?.id === c.id ? 'selected-chat-item' : ''\r\n          }`}\r\n          key={index}\r\n        >\r\n          <div\r\n            onClick={() => selectChatClick(c)}\r\n            className=\"chat-list-item-content\"\r\n          >\r\n            {c.people.length === 1 ? (\r\n              <>\r\n                <Icon circular inverted color=\"violet\" name=\"user cancel\" />\r\n                <div className=\"chat-list-preview\">\r\n                  <div className=\"preview-username\">No One Added Yet</div>\r\n                </div>\r\n              </>\r\n            ) : c.people.length === 2 ? (\r\n              <>\r\n                <ChatAvatar username={notMe(chatConfig, c)} chat={c} />\r\n\r\n                <div className=\"chat-list-preview\">\r\n                  <div className=\"preview-username\">{notMe(chatConfig, c)}</div>\r\n                  <div className=\"preview-message\">\r\n                    {c.last_message.attachments.length\r\n                      ? `${c.last_message.sender.username} sent an attachment`\r\n                      : c.last_message.text.slice(0, 50) + '...'}\r\n                  </div>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Icon circular inverted color=\"brown\" name=\"users\" />\r\n                <div className=\"chat-list-preview\">\r\n                  <div className=\"preview-username\">\r\n                    {joinUsernames(c.people, chatConfig.userName).slice(0, 50)}\r\n                    ...\r\n                  </div>\r\n                  <div className=\"preview-message\">\r\n                    {c.last_message.attachments.length\r\n                      ? `${c.last_message.sender.username} sent an attachment`\r\n                      : c.last_message.text.slice(0, 50) + '...'}\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          <div onClick={() => deleteChatClick(c)} className=\"chat-item-delete\">\r\n            <Icon name=\"delete\" />\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n","import { useChat } from 'context';\r\nimport { useResolved } from 'hooks';\r\nimport { ChatList } from 'components';\r\nimport { RailHeader } from 'components';\r\nimport { Loader } from 'semantic-ui-react';\r\n\r\nexport const LeftRail = () => {\r\n  const { myChats, createChatClick } = useChat();\r\n  const chatsResolved = useResolved(myChats);\r\n\r\n  return (\r\n    <div className=\"left-rail\">\r\n      <RailHeader />\r\n      {chatsResolved ? (\r\n        <>\r\n          {!!myChats.length ? (\r\n            <div className=\"chat-list-container\">\r\n              <ChatList />\r\n            </div>\r\n          ) : (\r\n            <div className=\"chat-list-container no-chats-yet\">\r\n              <h3>No Chats Yet</h3>\r\n            </div>\r\n          )}\r\n          <button className=\"create-chat-button\" onClick={createChatClick}>\r\n            Create Chat\r\n          </button>\r\n        </>\r\n      ) : (\r\n        <div className=\"chats-loading\">\r\n          <Loader active size=\"huge\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import { useChat } from 'context';\r\nimport { useState, useRef } from 'react';\r\nimport { Icon } from 'semantic-ui-react';\r\nimport { ImageUpload } from 'components';\r\nimport { sendMessage } from 'react-chat-engine';\r\n\r\nexport const ChatInput = () => {\r\n  const { chatConfig, selectedChat } = useChat();\r\n  const [chatInputText, setChatInputText] = useState('');\r\n  const [imageModalOpen, setImageModalOpen] = useState(false);\r\n\r\n  const inputRef = useRef(null);\r\n  const [image, setImage] = useState();\r\n\r\n  const sendChatMessage = () => {\r\n    if (selectedChat && chatInputText) {\r\n      setChatInputText('');\r\n      sendMessage(chatConfig, selectedChat.id, {\r\n        text: chatInputText,\r\n        files: [],\r\n      });\r\n    }\r\n  };\r\n\r\n  const onFileAttach = file => {\r\n    setImage(file);\r\n    setImageModalOpen(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"chat-controls\">\r\n        <div\r\n          onClick={() => {\r\n            const input = inputRef.current;\r\n            if (input) {\r\n              input.value = '';\r\n              input.click();\r\n            }\r\n          }}\r\n          className=\"attachment-icon\"\r\n        >\r\n          <Icon name=\"attach\" color=\"grey\" />\r\n        </div>\r\n        <input\r\n          value={chatInputText}\r\n          className=\"chat-input\"\r\n          placeholder=\"Send a message\"\r\n          onKeyPress={e => {\r\n            if (e.key === 'Enter') {\r\n              sendChatMessage();\r\n            }\r\n          }}\r\n          onChange={e => setChatInputText(e.target.value)}\r\n        />\r\n        <div onClick={sendChatMessage} className=\"send-message-icon\">\r\n          <Icon name=\"send\" color=\"grey\" />\r\n        </div>\r\n      </div>\r\n\r\n      <input\r\n        type=\"file\"\r\n        ref={inputRef}\r\n        className=\"file-input\"\r\n        accept=\"image/jpeg,image/png\"\r\n        onChange={e => {\r\n          const file = e.target?.files?.[0];\r\n          if (file) {\r\n            onFileAttach(file);\r\n          }\r\n        }}\r\n      />\r\n\r\n      {imageModalOpen && !!image && (\r\n        <ImageUpload\r\n          file={image}\r\n          mode=\"message\"\r\n          onSubmit={() => {\r\n            sendMessage(\r\n              chatConfig,\r\n              selectedChat.id,\r\n              {\r\n                text: chatInputText,\r\n                files: [image],\r\n              },\r\n              () => {\r\n                setImage(null);\r\n                setChatInputText('');\r\n              },\r\n            );\r\n          }}\r\n          close={() => setImageModalOpen(false)}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import { fb } from 'service';\r\nimport { useChat } from 'context';\r\nimport { useResolved } from 'hooks';\r\nimport { useRef, useState } from 'react';\r\nimport { ImageUpload } from 'components';\r\nimport { Icon, IconGroup, Image, Loader } from 'semantic-ui-react';\r\n\r\nexport const RailHeader = () => {\r\n  const { chatConfig } = useChat();\r\n  const configResolved = useResolved(chatConfig);\r\n  const inputRef = useRef(null);\r\n  const [image, setImage] = useState();\r\n\r\n  const onFileAttach = file => {\r\n    setImage(file);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <input\r\n        type=\"file\"\r\n        ref={inputRef}\r\n        className=\"file-input\"\r\n        accept=\"image/jpeg,image/png\"\r\n        onChange={e => {\r\n          const file = e.target?.files?.[0];\r\n          if (file) {\r\n            onFileAttach(file);\r\n          }\r\n        }}\r\n      />\r\n\r\n      {!!image && (\r\n        <ImageUpload\r\n          crop\r\n          file={image}\r\n          header=\"Set Your Avatar\"\r\n          mode=\"message\"\r\n          onSubmit={croppedImage => {\r\n            const storageRef = fb.storage.ref();\r\n            const uploadRef = storageRef.child(\r\n              `${chatConfig.userSecret}_avatar.jpg`,\r\n            );\r\n            uploadRef.put(croppedImage).then(() => {\r\n              uploadRef.getDownloadURL().then(url => {\r\n                fb.firestore\r\n                  .collection('chatUsers')\r\n                  .doc(chatConfig.userSecret)\r\n                  .update({ avatar: url })\r\n                  .then(() => {\r\n                    setImage(null);\r\n                  });\r\n              });\r\n            });\r\n          }}\r\n          close={() => setImage(null)}\r\n        />\r\n      )}\r\n\r\n      <div className=\"left-rail-header\">\r\n        <Icon\r\n          onClick={() => fb.auth.signOut()}\r\n          className=\"sign-out\"\r\n          name=\"sign out\"\r\n        />\r\n        {configResolved && !!chatConfig ? (\r\n          <div className=\"current-user-info\">\r\n            <IconGroup\r\n              onClick={() => {\r\n                const input = inputRef.current;\r\n                if (input) {\r\n                  input.value = '';\r\n                  input.click();\r\n                }\r\n              }}\r\n              className=\"user-avatar\"\r\n              size=\"large\"\r\n            >\r\n              {chatConfig.avatar ? (\r\n                <Image src={chatConfig.avatar} avatar />\r\n              ) : (\r\n                <div className=\"empty-avatar\">\r\n                  {chatConfig.userName[0].toUpperCase()}\r\n                </div>\r\n              )}\r\n\r\n              <Icon corner name=\"camera\" inverted circular />\r\n            </IconGroup>\r\n\r\n            <div className=\"current-username\">@{chatConfig.userName}</div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"user-loading\">\r\n            <Loader active size=\"small\" />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import { fb } from 'service';\r\nimport { useChat } from 'context';\r\nimport { Image } from 'semantic-ui-react';\r\nimport React, { useEffect, useState } from 'react';\r\n\r\nexport const ChatAvatar = ({ chat, username, className }) => {\r\n  const { chatConfig } = useChat();\r\n  const [avatar, setAvatar] = useState('');\r\n\r\n  useEffect(() => {\r\n    fb.firestore\r\n      .collection('chatUsers')\r\n      .where('userName', '==', username)\r\n      .get()\r\n      .then(snap => {\r\n        const data = snap.docs[0]?.data();\r\n        if (data?.avatar) {\r\n          setAvatar(data.avatar);\r\n        }\r\n      });\r\n  }, [chat, chatConfig, username]);\r\n\r\n  return avatar ? (\r\n    <Image className={className || 'chat-list-avatar'} src={avatar} />\r\n  ) : (\r\n    <div className={className || 'empty-avatar'}>\r\n      {chat.people\r\n        .find(p => p.person.username !== chatConfig.userName)\r\n        .person.username[0].toUpperCase()}\r\n    </div>\r\n  );\r\n};\r\n","import { useState } from 'react';\r\nimport { useChat } from 'context';\r\nimport { joinUsernames } from 'helpers';\r\nimport { Icon } from 'semantic-ui-react';\r\nimport { SearchUsers } from 'components';\r\n\r\nexport const ChatToolbar = () => {\r\n  const { selectedChat, chatConfig } = useChat();\r\n  const [searching, setSearching] = useState(false);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"chat-toolbar\">\r\n        <div className=\"chat-header-text\">\r\n          {joinUsernames(selectedChat.people, chatConfig.userName).slice(\r\n            0,\r\n            100,\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"add-user-icon\">\r\n          <Icon\r\n            color=\"grey\"\r\n            name=\"user plus\"\r\n            onClick={() => setSearching(true)}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <SearchUsers closeFn={() => setSearching(false)} visible={searching} />\r\n    </>\r\n  );\r\n};\r\n","import { useChat } from 'context';\r\nimport { useDebounce } from 'hooks';\r\nimport { Search } from 'semantic-ui-react';\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport { addPerson, getOtherPeople } from 'react-chat-engine';\r\n\r\nexport const SearchUsers = ({ visible, closeFn }) => {\r\n  let searchRef = useRef();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const debouncedSearchTerm = useDebounce(searchTerm, 500);\r\n\r\n  // null -> not searching for results\r\n  // [] -> No results\r\n  // [...] -> Results\r\n  const [searchResults, setSearchResults] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (visible && searchRef) {\r\n      searchRef.focus();\r\n    }\r\n  }, [visible]);\r\n\r\n  const {\r\n    myChats,\r\n    setMyChats,\r\n    chatConfig,\r\n    selectedChat,\r\n    setSelectedChat,\r\n  } = useChat();\r\n\r\n  const selectUser = username => {\r\n    addPerson(chatConfig, selectedChat.id, username, () => {\r\n      const filteredChats = myChats.filter(c => c.id !== selectedChat.id);\r\n      const updatedChat = {\r\n        ...selectedChat,\r\n        people: [...selectedChat.people, { person: { username } }],\r\n      };\r\n\r\n      setSelectedChat(updatedChat);\r\n      setMyChats([...filteredChats, updatedChat]);\r\n      closeFn();\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (debouncedSearchTerm) {\r\n      setLoading(true);\r\n      getOtherPeople(chatConfig, selectedChat.id, (chatId, data) => {\r\n        const userNames = Object.keys(data)\r\n          .map(key => data[key].username)\r\n          .filter(u =>\r\n            u.toLowerCase().includes(debouncedSearchTerm.toLowerCase()),\r\n          );\r\n        setSearchResults(userNames.map(u => ({ title: u })));\r\n        setLoading(false);\r\n      });\r\n    } else {\r\n      setSearchResults(null);\r\n    }\r\n  }, [debouncedSearchTerm, chatConfig, selectedChat]);\r\n\r\n  return (\r\n    <div\r\n      className=\"user-search\"\r\n      style={{ display: visible ? 'block' : 'none' }}\r\n    >\r\n      <Search\r\n        fluid\r\n        onBlur={closeFn}\r\n        loading={loading}\r\n        value={searchTerm}\r\n        placeholder=\"Search For Users\"\r\n        open={!!searchResults && !loading}\r\n        input={{ ref: r => (searchRef = r) }}\r\n        onSearchChange={e => setSearchTerm(e.target.value)}\r\n        results={searchResults}\r\n        onResultSelect={(e, data) => {\r\n          if (data.result?.title) {\r\n            selectUser(data.result.title);\r\n          }\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import { useState, useEffect } from 'react';\r\n\r\nexport const useDebounce = (value, delay) => {\r\n  const [debouncedValue, setDebouncedValue] = useState(value);\r\n\r\n  useEffect(() => {\r\n    const handler = setTimeout(() => setDebouncedValue(value), delay);\r\n    return () => clearTimeout(handler);\r\n  }, [value, delay]);\r\n\r\n  return debouncedValue;\r\n};\r\n","import { useChat } from 'context';\r\nimport { ChatAvatar } from 'components';\r\nimport { groupMessages } from 'helpers';\r\nimport { useScrollToBottom } from 'hooks';\r\n\r\nexport const MessageList = () => {\r\n  const { selectedChat } = useChat();\r\n  useScrollToBottom(selectedChat, 'chat-messages');\r\n\r\n  return (\r\n    <div className=\"chat-messages\">\r\n      {!!selectedChat.messages.length ? (\r\n        groupMessages(selectedChat.messages).map((m, index) => (\r\n          <div key={index} className=\"chat-message\">\r\n            <div className=\"chat-message-header\">\r\n              <ChatAvatar\r\n                className=\"message-avatar\"\r\n                username={m[0].sender.username}\r\n                chat={selectedChat}\r\n              />\r\n              <div className=\"message-author\">{m[0].sender.username}</div>\r\n            </div>\r\n\r\n            <div className=\"message-content\">\r\n              {m.map((individualMessage, index) => (\r\n                <div key={index}>\r\n                  <div className=\"message-text\">{individualMessage.text}</div>\r\n\r\n                  {!!individualMessage.attachments.length && (\r\n                    <img\r\n                      className=\"message-image\"\r\n                      src={individualMessage.attachments[0].file}\r\n                      alt={individualMessage.id + '-attachment'}\r\n                    />\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ))\r\n      ) : (\r\n        <div className=\"no-messages-yet\">No messages yet</div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import { useEffect } from \"react\";\r\n\r\nexport const useScrollToBottom = (trigger, className) => {\r\n  // Scrolls to the bottom of a container with a \r\n  // given className when active is flipped to true\r\n\r\n  // Because we are dealing with images as well, we need to wait\r\n  // until the images have loaded fully before doing the scroll.\r\n  useEffect(() => {\r\n    if (!!trigger) {\r\n      Promise.all(\r\n        Array.from(document.images)\r\n          .filter(img => !img.complete)\r\n          .map(img => new Promise(resolve => {\r\n            img.onload = img.onerror = resolve;\r\n          }))\r\n      )\r\n        .then(() => {\r\n          document.getElementsByClassName(className)[0].scrollTop = document.getElementsByClassName(className)[0].scrollHeight;\r\n        });\r\n    }\r\n  }, [trigger, className]);\r\n};\r\n","import AvatarEditor from 'react-avatar-editor';\r\nimport { Image, Modal } from 'semantic-ui-react';\r\nimport { useEffect, useRef, useState } from 'react';\r\n\r\nexport const ImageUpload = ({\r\n  file,\r\n  close,\r\n  onSubmit,\r\n  crop = false,\r\n  header = 'Send This Image?',\r\n}) => {\r\n  const [imageSrc, setImageSrc] = useState('');\r\n  const cropRef = useRef();\r\n\r\n  // Use the File Reader API to\r\n  // read the file and set the source\r\n  useEffect(() => {\r\n    const fr = new FileReader();\r\n    fr.onload = () => setImageSrc(fr.result);\r\n    fr.readAsDataURL(file);\r\n  }, [file]);\r\n\r\n  return (\r\n    <Modal dimmer=\"blurring\" open={true}>\r\n      <Modal.Header>{header}</Modal.Header>\r\n\r\n      <Modal.Content image>\r\n        {crop ? (\r\n          <AvatarEditor\r\n            ref={cropRef}\r\n            width={200}\r\n            height={200}\r\n            border={50}\r\n            image={imageSrc}\r\n          />\r\n        ) : (\r\n          <Image size=\"medium\" src={imageSrc} alt=\"preview\" />\r\n        )}\r\n      </Modal.Content>\r\n\r\n      <Modal.Actions>\r\n        <div className=\"image-upload-actions\">\r\n          <button className=\"cancel\" onClick={close}>\r\n            Cancel\r\n          </button>\r\n          <button\r\n            className=\"submit\"\r\n            onClick={() => {\r\n              if (crop && cropRef) {\r\n                const canvas = cropRef.current\r\n                  .getImageScaledToCanvas()\r\n                  .toDataURL();\r\n                fetch(canvas)\r\n                  .then(res => res.blob())\r\n                  .then(blob => onSubmit(blob));\r\n              } else {\r\n                onSubmit();\r\n              }\r\n            }}\r\n          >\r\n            Upload\r\n          </button>\r\n        </div>\r\n      </Modal.Actions>\r\n    </Modal>\r\n  );\r\n};\r\n","import './index.css';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { App } from 'components';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  \r\n    <Router>\r\n      <App />\r\n    </Router>\r\n  ,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}